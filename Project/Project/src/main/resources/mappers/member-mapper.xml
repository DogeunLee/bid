<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">

	<resultMap type="member" id="member_rm">
		<id property="memberNo" column="MEMBER_NO" />
		<result property="memberId" column="MEMBER_ID" />
		<result property="memberPw" column="MEMBER_PW" />
		<result property="memberName" column="MEMBER_NAME" />
		<result property="memberGender" column="MEMBER_GENDER" />
		<result property="memberTel" column="MEMBER_TEL" />
		<result property="memberBirth" column="MEMBER_BIRTH" />
		<result property="memberHire" column="MEMBER_HIRE" />
		<result property="memberSt" column="MEMBER_ST" />
		<result property="memberLv" column="MEMBER_LV" />
		<result property="memberAddr" column="MEMBER_ADDR" />
		<result property="memberImg" column="MEMBER_IMAGE" />
		<result property="memberEmail" column="MEMBER_EMAIL" />
		
	</resultMap>

	<select id="selectMemberNo" resultType="_int">
		SELECT COUNT(*) FROM
		MEMBER
	</select>

	<select id="login" parameterType="member" resultMap="member_rm">
		SELECT *
		FROM MEMBER
		WHERE MEMBER_ID = #{memberId}
	</select>

	<!-- <select id="countMember" resultType="_int"> SELECT COUNT(*) FROM MEMBER 
		</select> -->

	<select id="getMemberList" resultMap="member_rm">
		SELECT
		MEMBER_ID,
		MEMBER_NAME,
		MEMBER_GENDER,
		MEMBER_TEL,
		FLOOR(MONTHS_BETWEEN(SYSDATE, MEMBER_BIRTH) / 12) AS MEMBER_BIRTH,
		TO_CHAR(MEMBER_HIRE, 'YYYY-MM-DD') AS
		MEMBER_HIRE,
		MEMBER_ST,
		MEMBER_LV,
		MEMBER_ADDR,
		MEMBER_EMAIL		
		FROM MEMBER
	</select>

	<select id="memberIdDupCheck" parameterType="string" resultType="_int">
		SELECT COUNT(*) FROM MEMBER
		WHERE MEMBER_ID = #{memberId}
		AND MEMBER_ST = 'N'
	</select>



</mapper>
